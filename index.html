<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>知识·树洞</title>
    <style>
        /* 设置页面的全局样式 */
        body {
            font-family: Arial, sans-serif;
            color: #000;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: #0d1117;
        }
        .container {
            padding: 20px;
            max-width: 800px;
            margin: 30px auto;
        }
        .content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .logo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 5px solid #fff;
            object-fit: cover;
            margin-top: 8px;
        }
        h1 {
            margin-bottom: 5px;
            font-size: 24px;
            color: #fff;
        }
        .small-link {
            font-size: 12px;
            color: #fff;
            text-decoration: none;
            margin-bottom: 2px;
        }
        .small-link:hover {
            text-decoration: underline;
        }
        .link-list {
            list-style: none;
            padding: 0;
            width: 60%;
        }
        .link-item {
            margin: 15px 0;
            position: relative;
        }
        .link-item a {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: rgb(51, 51, 51);
            font-weight: bold;
            letter-spacing: 0.1em;
            background-color: #fff;
            padding: 22px 16px;
            border-radius: 30px;
            font-size: 14px;
            transition: background-color 0.3s;
            position: relative;
        }
        .link-item a:hover {
            background-color: rgba(255, 255, 255, 0.85);
        }
        .link-icon {
            position: absolute;
            left: 6px;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            object-fit: cover;
            display: none;
        }
        .link-text {
            flex-grow: 1;
            text-align: center;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }
        .link-arrow {
            position: absolute;
            right: 15px;
            font-weight: bold;
            color: #5f5c5c;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="content">
            <img src="logo.png" alt="Logo" class="logo" id="site-logo">
            <h1 id="site-name">知识·树洞</h1>
            <a href="https://space.bilibili.com/519341297?spm_id_from=333.1007.0.0" class="small-link" id="link-description" target="_blank">→爱生活·爱分享·爱白嫖(,,･∀･)ﾉ゛</a>
            <ul class="link-list" id="link-list">
                <li class="link-item">
                    <a href="http://quruanpu.cccpan.com/" target="_blank">
                        <img id="icon1" class="link-icon" alt="icon">
                        <span class="link-text">宝藏 · 中心</span>
                        <span class="link-arrow">></span>
                    </a>
                </li>
                  <li class="link-item">
                    <a href="https://365.kdocs.cn/l/cktLsPoRB2Lv" target="_blank">
                        <img id="icon3" class="link-icon" alt="icon">
                        <span class="link-text">软件库目录</span>
                        <span class="link-arrow">></span>
                    </a>
                </li>
                <li class="link-item">
                    <a href="https://share.feijipan.com/s/98BP09Qj" target="_blank">
                        <img id="icon2" class="link-icon" alt="icon">
                        <span class="link-text">精品软件库</span>
                        <span class="link-arrow">></span>
                    </a>
                </li>
                <li class="link-item">
                    <a href="https://www.yuque.com/quruanpu/dimqr1/qovkrsgfx0casrwq?singleDoc#" target="_blank">
                        <img id="icon4" class="link-icon" alt="icon">
                        <span class="link-text">精品"源"分享</span>
                        <span class="link-arrow">></span>
                    </a>
                </li>
                <li class="link-item">
                    <a href="https://ahatai.chatgpt.day/" target="_blank">
                        <img id="icon5" class="link-icon" alt="icon">
                        <span class="link-text">GPT4.0镜像</span>
                        <span class="link-arrow">></span>
                    </a>
                </li>
                <li class="link-item">
                    <a href="https://haokale.cn/h5/?code=p21izykn" target="_blank">
                        <img id="icon6" class="link-icon" alt="icon">
                        <span class="link-text">免费流量卡</span>
                        <span class="link-arrow">></span>
                    </a>
                </li>
                <li class="link-item">
                    <a href="https://qm.qq.com/q/gJwCnVwuNU" target="_blank">
                        <img id="icon7" class="link-icon" alt="icon">
                        <span class="link-text">加入交流群</span>
                        <span class="link-arrow">></span>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <script>
        // 设置默认背景图片
        function setDefaultBackground() {
            document.body.style.backgroundColor = '#0d1117';
            console.log('Default background color set.');
        }

        // 加载背景图片
        function loadBackground() {
            const backgroundPaths = [
                'uploads/beijing/beijing.png',
                'uploads/beijing/beijing.jpg',
                'uploads/beijing/beijing.jpeg',
                'uploads/beijing/beijing.gif'
            ];

            let loaded = false;

            backgroundPaths.forEach(path => {
                const img = new Image();
                img.onload = () => {
                    if (!loaded) {
                        document.body.style.backgroundImage = `url(${img.src})`;
                        document.body.style.backgroundSize = 'cover';
                        document.body.style.backgroundRepeat = 'no-repeat';
                        loaded = true;
                        console.log(`Background image loaded from ${img.src}`);
                    }
                };
                img.onerror = () => {
                    console.log(`Failed to load background image from ${path}`);
                    if (backgroundPaths.indexOf(path) === backgroundPaths.length - 1 && !loaded) {
                        setDefaultBackground();
                    }
                };
                img.src = path;
            });
        }

        // 加载图标
        function loadIcons() {
            const iconFormats = ['png', 'jpg', 'jpeg', 'svg', 'ico'];
            const iconIds = ['icon1', 'icon2', 'icon3', 'icon4', 'icon5', 'icon6', 'icon7', 'icon8'];

            iconIds.forEach((iconId, index) => {
                const iconBasePath = `uploads/tubiao/tubiao${index + 1}`;
                let loaded = false;

                const tryLoadIcon = (formatIndex) => {
                    if (formatIndex >= iconFormats.length) return;
                    const format = iconFormats[formatIndex];
                    const img = document.getElementById(iconId);
                    const iconPath = `${iconBasePath}.${format}`;

                    img.src = iconPath;
                    img.onload = () => {
                        img.style.display = 'block';
                        loaded = true;
                        console.log(`Icon loaded from ${iconPath}`);
                    };
                    img.onerror = () => {
                        console.log(`Failed to load icon from ${iconPath}`);
                        if (!loaded) {
                            tryLoadIcon(formatIndex + 1);
                        }
                    };
                };

                tryLoadIcon(0);
            });
        }

        // 初始化
        function initialize() {
            loadBackground();
            loadIcons();
        }

        initialize();
    </script>
</body>
</html>
